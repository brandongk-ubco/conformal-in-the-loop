{
	"name": "PYTORCH",
	"shutdownAction": "none",
	"build": {
		"dockerfile": "Dockerfile",
		"args": { "LIGHTNING_VERSION": "2.1.0", "PYTHON_VERSION": "3.10", "PYTORCH_VERSION": "2.1", "CUDA_VERSION": "12.1.0"}
	},

	"mounts": [
		"type=bind,source=/home/${localEnv:USER}/.ssh/id_ed25519,target=/home/vscode/.ssh/id_ed25519,readonly",
		"type=bind,source=/home/${localEnv:USER}/.ssh/id_ed25519.pub,target=/home/vscode/.ssh/id_ed25519.pub,readonly",
		"type=bind,source=/home/${localEnv:USER}/.ssh/known_hosts,target=/home/vscode/.ssh/known_hosts",
		"type=bind,source=/media/data/datasets,target=/workspaces/conformal-in-the-loop/datasets,readonly"
	],

	"runArgs": [
		"--gpus=all",
		"--ipc=host"
	],

	// Use 'forwardPorts' to make a list of ports inside the container available locally.
	// "forwardPorts": [],

	"postCreateCommand": "(cd /workspaces/conformal-in-the-loop && sudo chown -R vscode:vscode $(ls -I datasets))",

	"customizations": {
		"vscode": {
		  "extensions": [
			"github.copilot",
			"github.copilot-chat",
			"ms-python.python",
			"ms-toolsai.jupyter",
			"redhat.vscode-yaml",
			"eamodio.gitlens",
			"bierner.markdown-mermaid"
		  ]
		}
	  },

	"features": {
		"common": {
			"username": "automatic",
			"uid": "automatic",
			"gid": "automatic",
			"installZsh": true,
			"installOhMyZsh": true,
			"upgradePackages": true,
			"nonFreePackages": false
		},
		"git": "latest"
	},
	"remoteUser": "vscode"
}